@page
@model E_commerce_store_new_.Pages.CheckoutModel
@{
}



<style>
        .cart {
            width: 100%;
            margin: 20px auto;
        }

        .cart-header {
            text-align: center;
        }

        .cart-items {
            display: flex;
            flex-wrap: wrap;
            justify-content: space-between;
        }

        .cart-item {
            width: 45%;
            margin-bottom: 20px;
            border: 1px solid #ccc;
            display: flex;
        }

        .cart-item-image {
            width: 30%;
        }

            .cart-item-image img {
                width: 100%;
            }

        .cart-item-details {
            width: 70%;
            padding: 10px;
        }

            .cart-item-details h3,
            .cart-item-details p {
                margin: 0;
                padding: 0;
            }

        .cart-item-quantity {
            margin-top: 10px;
        }

            .cart-item-quantity label {
                display: inline-block;
                margin-right: 5px;
            }

        .cart-item-remove {
            margin-top: 10px;
        }













        body{
        background: linear-gradient(110deg, #BBDEFB 60%,#42A5F5  60%);
    }

    .shop{
        font-size: 10px;
    }

    .space{
        letter-spacing: 0.8px !important;
    }

    .second a:hover {
        color: rgb(92, 92, 92) ;
    }

    .active-2 {
        color: rgb(92, 92, 92)
    }


    .breadcrumb>li+li:before {
        content: "" !important
    }

    .breadcrumb {
        padding: 0px;
        font-size: 10px;
        color: #aaa !important;
    }

    .first {
        background-color: white ;
    }

    a {
        text-decoration: none !important;
        color: #aaa ;
    }

    .btn-lg,.form-control-sm:focus,
    .form-control-sm:active,
    a:focus,a:active {
        outline: none !important;
        box-shadow: none !important
    }

    .form-control-sm:focus{
        border:1.5px solid #4bb8a9 ;
    }

    .btn-group-lg>.btn, .btn-lg {
        padding: .5rem 0.1rem;
        font-size: 1rem;
        border-radius: 0;
        color: white !important;
        background-color: #4bb8a9;
        height: 2.8rem !important;
        border-radius: 0.2rem !important;
    }

    .btn-group-lg>.btn:hover, .btn-lg:hover {
        background-color: #26A69A;
    }

    .btn-outline-primary{
        background-color: #fff !important;
        color:#4bb8a9 !important;
        border-radius: 0.2rem !important;
        border:1px solid #4bb8a9;
    }

    .btn-outline-primary:hover{
        background-color:#4bb8a9  !important;
        color:#fff !important;
        border:1px solid #4bb8a9;
    }

    .card-2{
        margin-top: 40px !important;
    }

    .card-header{
        background-color: #fff;
        border-bottom:0px solid #aaaa !important;
    }

    p{
        font-size: 13px ;
    }

    .small{
        font-size: 9px !important;
    }

    .form-control-sm {
        height: calc(2.2em + .5rem + 2px);
        font-size: .875rem;
        line-height: 1.5;
        border-radius: 0;
    }

    .cursor-pointer{
        cursor: pointer;
    }

    .boxed {
        padding: 0px 8px 0 8px ;
        background-color: #4bb8a9;
        color: white;
    }

    .boxed-1{
        padding: 0px 8px 0 8px ;
        color: black !important;
        border: 1px solid #aaaa;
    }

    .bell{
        opacity: 0.5;
        cursor: pointer;
    }


        .breadcrumb-item+.breadcrumb-item {
            padding-left: 0
        }


</style>


<body>

    <div class="cart-total">
        Total Price: @ViewData["totalPrice"]
    </div>



  <!--  
    <form method="post">
        <div class="form-group">
            <label for="firstName">First Name:</label>
            <input type="text" id="firstName" name="firstName" required>
        </div>
        <div class="form-group">
            <label for="lastName">Last Name:</label>
            <input type="text" id="lastName" name="lastName" required>
        </div>
        <div class="form-group">
            <label for="email">Email:</label>
            <input type="text" id="email" name="email" required>
        </div>
        <div class="form-group">
            <label for="address">Address:</label>
            <input type="text" id="address" name="address" required>
        </div>
        <div class="form-group">
            <label for="phoneNumber">Phone Number:</label>
            <input type="tel" id="phoneNumber" name="phoneNumber" required>
        </div>
        <div class="form-group">
            <label for="dateOfBirth">Date of Birth:</label>
            <input type="date" id="dateOfBirth" name="dob" required>
        </div>
        <button type="submit" name="completeTransaction">Complete Transaction</button>
    </form>
    -->
   <div class=" container-fluid my-5 ">
         <div class="row justify-content-center ">
             <div class="col-xl-10">
                 <div class="card shadow-lg ">
                     <div class="row p-2 mt-3 justify-content-between mx-sm-2">
                         <div class="col">
                             <p class="text-muted space mb-0 shop"> Shop No.78618K</p>
                             <p class="text-muted space mb-0 shop">Store Locator</p>
                         </div>
                         <div class="col">
                             <div class="row justify-content-start ">
                                 <div class="col">
                                     <img class="irc_mi img-fluid cursor-pointer " src="https://i.imgur.com/jFQo2lD.png" width="70" height="70">
                                 </div>
                             </div>
                         </div>
                         <div class="col-auto">
                             <img class="irc_mi img-fluid bell" src="https://i.imgur.com/uSHMClk.jpg" width="30" height="30">
                         </div>
                     </div>
                     <div class="row  mx-auto justify-content-center text-center">
                         <div class="col-12 mt-3 ">
                             <nav aria-label="breadcrumb" class="second ">
                                 <ol class="breadcrumb indigo lighten-6 first  ">
                                     <li class="breadcrumb-item font-weight-bold "><a class="black-text text-uppercase " href="#"><span class="mr-md-3 mr-1">BACK TO SHOP</span></a><i class="fa fa-angle-double-right " aria-hidden="true"></i></li>
                                     <li class="breadcrumb-item font-weight-bold"><a class="black-text text-uppercase" href="#"><span class="mr-md-3 mr-1">SHOPPING BAG</span></a><i class="fa fa-angle-double-right text-uppercase " aria-hidden="true"></i></li>
                                     <li class="breadcrumb-item font-weight-bold"><a class="black-text text-uppercase active-2" href="#"><span class="mr-md-3 mr-1">CHECKOUT</span></a></li>
                                 </ol>
                             </nav>
                         </div>
                     </div>

                     <div class="row justify-content-around">


                         <div class="col-md-5">

                             <div class="card border-0">
                                 <div class="card-header pb-0">
                                     <h2 class="card-title space ">Checkout</h2>
                                     <p class="card-text text-muted mt-4  space">SHIPPING DETAILS</p>
                                     <hr class="my-0">
                                 </div>

                                 <div class="card-body">


                                     <div class="row justify-content-between">
                                         <div class="col-auto mt-0"><p><b>BBBootstrap Team Vasant Vihar  110020 New Delhi India</b></p></div>
                                         <div class="col-auto"><p><b>BBBootstrap@gmail.com</b> </p></div>
                                     </div>
                                     <div class="row mt-4">
                                         <div class="col"><p class="text-muted mb-2">CUSTOMER DETAILS</p><hr class="mt-0"></div>
                                     </div>
                                    <form class="customer-form" method="post">
                                     <div class="form-group">
                                         <label for="FIRSTNAME" class="small text-muted mb-1">FIRST NAME</label>
                                         <input type="text" class="form-control form-control-sm" name="FIRSTNAME" id="FIRSTNAME" aria-describedby="helpId" placeholder="John">
                                     </div>
                                     <div class="form-group">
                                         <label for="LASTNAME" class="small text-muted mb-1">LAST NAME</label>
                                         <input type="text" class="form-control form-control-sm" name="LASTNAME" id="LASTNAME" aria-describedby="helpId" placeholder="Doe">
                                     </div>
                                     <div class="form-group">
                                         <label for="EMAIL" class="small text-muted mb-1">EMAIL</label>
                                         <input type="email" class="form-control form-control-sm" name="EMAIL" id="EMAIL" aria-describedby="helpId" placeholder="john.doe@example.com">
                                     </div>
                                     <div class="form-group">
                                         <label for="ADDRESS" class="small text-muted mb-1">ADDRESS</label>
                                         <input type="text" class="form-control form-control-sm" name="ADDRESS" id="ADDRESS" aria-describedby="helpId" placeholder="123 Main St">
                                     </div>
                                     <div class="form-group">
                                         <label for="PHONE" class="small text-muted mb-1">PHONE NUMBER</label>
                                         <input type="tel" class="form-control form-control-sm" name="PHONE" id="PHONE" aria-describedby="helpId" placeholder="(123) 456-7890">
                                     </div>
                                     <div class="form-group">
                                         <label for="DOB" class="small text-muted mb-1">DATE OF BIRTH</label>
                                         <input type="date" class="form-control form-control-sm" name="DOB" id="DOB" aria-describedby="helpId">
                                     </div>

                                        <input type="submit" value="Checkout" onclick="submitForm()">
                                     </form>

                                     <div class="row mt-4">
                                         <div class="col"><p class="text-muted mb-2">PAYMENT DETAILS</p><hr class="mt-0"></div>
                                     </div>
                                     <div class="form-group">
                                         <label for="NAME" class="small text-muted mb-1">NAME ON CARD</label>
                                         <input type="text" class="form-control form-control-sm" name="NAMEONCARD" id="NAME" aria-describedby="helpId" placeholder="BBBootstrap Team">
                                     </div>
                                     <div class="form-group">
                                         <label for="NAME" class="small text-muted mb-1">CARD NUMBER</label>
                                         <input type="text" class="form-control form-control-sm" name="NAME" id="CARDNUMBER" aria-describedby="helpId" placeholder="4534 5555 5555 5555">
                                     </div>
                                     <div class="row no-gutters">
                                         <div class="col-sm-6 pr-sm-2">
                                             <div class="form-group">
                                                 <label for="NAME" class="small text-muted mb-1">VALID THROUGH</label>
                                                 <input type="text" class="form-control form-control-sm" name="VALIDTHROUGH" id="NAME" aria-describedby="helpId" placeholder="06/21">
                                             </div>
                                         </div>
                                         <div class="col-sm-6">
                                             <div class="form-group">
                                                 <label for="NAME" class="small text-muted mb-1">CVC CODE</label>
                                                 <input type="text" class="form-control form-control-sm" name="CVC" id="NAME" aria-describedby="helpId" placeholder="183">
                                             </div>
                                         </div>
                                     </div>


                                 </div>


                             </div>

                         </div>



                         <div class="col-md-5">
                             <div class="card border-0 ">
                                 <div class="card-header card-2">
                                     <p class="card-text text-muted mt-md-4  mb-2 space">YOUR ORDER <span class=" small text-muted ml-2 cursor-pointer">EDIT SHOPPING BAG</span> </p>
                                     <hr class="my-2">
                                 </div>
                                 <div class="card-body pt-0">
    @foreach (var item in Model.UserCart)
    {
                                             <div id="cart-item-@item.ProductId">
                                                 <div class="row justify-content-between">
                                                     <div class="col-auto col-md-7">
                                                         <div class="media flex-column flex-sm-row">
                                                             <img class="img-fluid" src="@item.Image" width="62" height="62">
                                                             <div class="media-body my-auto">
                                                                 <div class="row">
                                                                     <div class="col-auto"><p class="mb-0"><b>@item.Name</b></p><small class="text-muted">@item.DateAdded</small></div>
                                                                 </div>
                                                             </div>
                                                         </div>
                                                     </div>
                                                     <div class="pl-0 flex-sm-col col-auto my-auto"><p class="boxed-1">@item.Quantity</p></div>
                                                     <div class="pl-0 flex-sm-col col-auto my-auto"><p><b>@item.Price</b></p></div>
                                                 </div>
                                            <form method="post" class="remove-from-cart-form" asp-page-handler="RemoveFromCart">
                                                <input type="hidden" name="productId" value="@item.ProductId">
                                                <button type="submit">Remove</button>
                                            </form>
                                             </div>
    }



                                     <hr class="my-2">
                                     <div class="row ">
                                         <div class="col">
                                             <div class="row justify-content-between">
                                                 <div class="col-4"><p class="mb-1"><b>Subtotal</b></p></div>
                                                 <div class="flex-sm-col col-auto"><p class="mb-1"><b> <span id="total-price">@ViewData["totalPrice"]</span></b></p></div>
                                             </div>
                                             <div class="row justify-content-between">
                                                 <div class="col"><p class="mb-1"><b>Shipping</b></p></div>
                                                 <div class="flex-sm-col col-auto"><p class="mb-1"><b>50</b></p></div>
                                             </div>
                                             <div class="row justify-content-between">
                                                 <div class="col-4"><p><b>Total</b></p></div>
                                                 <div class="flex-sm-col col-auto"><p class="mb-1"><b>537 SEK</b></p> </div>
                                             </div><hr class="my-0">
                                         </div>
                                     </div>
                                     <div class="row mb-5 mt-4 ">
                                         <div class="col-md-7 col-lg-6 mx-auto"><button type="button" class="btn btn-block btn-outline-primary btn-lg">ADD GIFT CODE</button></div>
                                     </div>
                                 </div>
                             </div>
                         </div>
                     </div>

                 </div>
             </div>
         </div>
     </div>
    

    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    
   <script>
        $(document).ready(function () {
            $('.remove-from-cart-form').submit(function (event) {
                event.preventDefault(); // prevent the form from submitting normally

                var form = $(this); // get the form element
                var productId = form.find('input[name="productId"]').val(); // get the product ID

                $.ajax({
                    type: 'POST',
                    url: form.attr('action'), // get the form's action attribute
                    data: form.serialize(), // serialize the form data
                    success: function () {
                        // show a success message
                        var message = 'Product removed from cart.';
                        $('#message').text(message);

                        // remove the item from the cart
                        $('#cart-item-' + productId).remove();

                        // update the total price displayed on the page
                        $('#total-price').text(data.totalPrice);
                    },
                    error: function () {
                        // show an error message
                        var message = 'Error removing product from cart.';
                        $('#message').text(message);
                    }
                });
            });
        });


    </script>
    
    <script>
    function submitForm() {
    var form = $('.customer-form');
    $.ajax({
    url: form.attr('action'),
    type: 'post',
    data: form.serialize(),
    success: function(result) {
    // handle success here
    },
    error: function() {
    // handle error here
    }
    });
    return false;
    }

    </script>

</body>


<!--
<h2>Checkout</h2>

<form method="post">
    <div class="form-group">
        <label for="firstName">First Name:</label>
        <input type="text" id="firstName" name="firstName" required>
    </div>
    <div class="form-group">
        <label for="lastName">Last Name:</label>
        <input type="text" id="lastName" name="lastName" required>
    </div>
    <div class="form-group">
        <label for="email">Email:</label>
        <input type="text" id="email" name="email" required>
    </div>
    <div class="form-group">
        <label for="address">Address:</label>
        <input type="text" id="address" name="address" required>
    </div>
    <div class="form-group">
        <label for="phoneNumber">Phone Number:</label>
        <input type="tel" id="phoneNumber" name="phoneNumber" required>
    </div>
    <div class="form-group">
        <label for="dateOfBirth">Date of Birth:</label>
        <input type="date" id="dateOfBirth" name="dob" required>
    </div>
    <button type="submit" name="completeTransaction">Complete Transaction</button>
</form>

  -->